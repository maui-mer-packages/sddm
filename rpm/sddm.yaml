Name        : sddm
Version     : 0.8.90
Release     : 1
Group       : System/GUI/Other
License     : LGPL-2.1+
Summary     : Lightweight QML-based display manager
Description : Lightweight QML-based display manager.
URL         : https://github.com/sddm/sddm
Sources     :
    - "%{name}-%{version}.tar.xz"
SetupOptions: -q -n %{name}-%{version}/upstream
RpmLintIgnore:
    - files-duplicate

Patches:
    - 0001-Add-debugging-messages-to-the-authentication-code.patch
    - 0002-sddm-helper-exit-with-code-0-otherwise-it-looks-like.patch
    - 0003-Don-t-restart-greeter-and-display-server-if-sddm-hel.patch
    - 0004-Handle-authentication-errors-from-PAM-conversation.patch

PkgBR:
    - cmake
    - pam-devel
    - qt5-qttools-linguist
    - systemd
PkgConfigBR:
    - systemd
    - Qt5Core
    - Qt5Gui
    - Qt5DBus
    - Qt5Qml
    - Qt5Quick
    - xcb
    - xcb-xkb
Requires:
    - xorg-x11-server-Xorg
    - libxcb >= 1.10
    - qt5-plugin-platform-xcb
Provides:
    - service(graphical-login) = %{name}

RequiresPost:
    - systemd
RequiresPreUn:
    - systemd
RequiresPostUn:
    - systemd

Configure  : cmake 
ConfigOptions: 
    - -DCMAKE_BUILD_TYPE=RelWithDebInfo 
    - -DUSE_QT5:bool=ON

Files:
    - "%config %{_sysconfdir}/sddm.conf"
    - "%config(noreplace) %{_sysconfdir}/pam.d/sddm"
    - "%config(noreplace) %{_sysconfdir}/pam.d/sddm-autologin"
    - "%config(noreplace) %{_sysconfdir}/pam.d/sddm-greeter"
    - "%config(noreplace) %{_sysconfdir}/dbus-1/system.d/org.freedesktop.DisplayManager.conf"
    - "%{_bindir}/sddm"
    - "%{_bindir}/sddm-greeter"
    - "%{_libexecdir}/sddm-helper"
    - "%{_datadir}/sddm/faces/*"
    - "%{_datadir}/sddm/flags/*"
    - "%{_datadir}/sddm/scripts/*"
    - "%{_datadir}/sddm/translations/*"
    - "%{_datadir}/sddm/sddm.conf.sample"
    - "%{_datadir}/sddm/themes/circles/*"
    - "%{_datadir}/sddm/themes/elarun/*"
    - "%{_datadir}/sddm/themes/maldives/*"
    - "%{_datadir}/sddm/themes/maui/*"
    - "%{_unitdir}/sddm.service"
    - "%{_libdir}/qt5/qml/SddmComponents/*"
